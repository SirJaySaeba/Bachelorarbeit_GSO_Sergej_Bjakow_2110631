var Tumblr=Tumblr||{};
Tumblr.PostMessageListener=(function(){return{initialize:function(d){d=d||function(){};var c=window.addEventListener?"addEventListener":"attachEvent";var b=window[c];var a=c=="attachEvent"?"onmessage":"message";b(a,function(g){var f=g.data.split(";");d(f,g.origin)},false)}}})();
Tumblr.Iframe=(function(){var e={},m,g,j;var h=(window.jQuery)?window.jQuery:null;var n=function(p){return document.getElementById(p)};var l=function(p){return document.querySelector(p)};var d=function(p){return document.querySelectorAll(p)};var k={};function f(s,p,r,q){if(window===window.parent){return false}if(typeof r==="undefined"){r=-1}if(typeof q==="undefined"){q=decodeURIComponent(e.origin)}return _t.delay(function(){_t.postMessage(["resize_iframe",s,p,_t.protocol_host()],q,window.parent)},r)}function b(s,p,u,v,q,t){if(!s){s=window.innerWidth}if(!p){p=window.innerHeight}if(window.innerWidth===s&&window.innerHeight===p){v.call();return false}if(u){u.call()}var r=0;return setInterval(function(){if(window.innerWidth===s&&window.innerHeight===p){return v.call()}if(t&&(++r===t)){return v.call()}},q)}function i(){if(!(e.get.name&&e.get.name.length)){return false}if(n("btn_follow_join")){n("btn_follow_join").href="https://www.tumblr.com/register/follow/"+e.get.name}if(n("btn_follow")){n("btn_follow").href="https://www.tumblr.com/register/follow/"+e.get.name}if(n("btn_join")){n("btn_join").href="https://www.tumblr.com/register/join_tumblr?referring_blog="+e.get.name}}function a(q){var p={name:"mobile",pretty_name:"mobile",mobile:false};if(typeof q==="undefined"){q=(navigator.userAgent||navigator.vendor||window.opera)}if(q.match(/iphone/i)){p.name="iphone";p.pretty_name="iPhone";p.mobile=true}else{if(q.match(/ipad/i)){p.name="ipad";p.pretty_name="iPad";p.mobile=true}else{if(q.match(/android/i)||_t.is_mobile()){p.name="android";p.pretty_name="android";p.mobile=true}}}return p}function o(u,p){if(!u){return false}var t=d("[data-translation]");for(var q=t.length-1;q>=0;q--){var r=t[q],s=r.getAttribute("data-translation");if(l10n_str[g]&&l10n_str[g][s]){r.textContent=l10n_str[g][s];if(p){r.parentNode.setAttribute("title",l10n_str[g][s])}}}return true}var c=(function(){return{standard:function(){},pill:function(p){var q=n("iframe_controls");if(!p&&e.get.name&&e.get.name.length){n("btn_follow_join").href="https://www.tumblr.com/register/follow/"+e.get.name;n("btn_join").href="https://www.tumblr.com/register/join_tumblr?referring_blog="+e.get.name}_t.addClass(q,"controls_pill");_t.removeClass(document.body,"loading");Tumblr.IframeSizing.init(function(r){f(3+r,26)})},b_card:function(w){var x=n("iframe_controls");var s=n("card");i();_t.addClass(document.body,"version_pill");_t.addClass(x,"controls_pill");_t.removeClass(document.body,"loading");var q=_t.getCookie("card");if(q&&q.value==="0"){f(x.offsetWidth+1,x.offsetHeight);return}var p=_t.getVars().name;var u=_t.getVars().avatar;var v=_t.getVars().title;document.getElementById("name").innerHTML=p;document.getElementById("avatar").style.backgroundImage="url("+decodeURIComponent(u)+")";document.getElementById("title").innerHTML=decodeURIComponent(v).replace(/\+/g," ");document.getElementById("card").style.display="block";var t=n("x_button");if(typeof window.addEventListener!="undefined"){t.addEventListener("click",r,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onclick_x",r)}}function r(){_t.setCookie("card",0,365);if(s.parentNode){s.parentNode.removeChild(s)}f(x.offsetWidth+1,x.offsetHeight)}f(s.offsetWidth+20,s.offsetHeight+10)},c_pill:function(p){var q=n("iframe_controls");i();_t.addClass(document.body,"version_pill");_t.addClass(q,"controls_pill");_t.removeClass(document.body,"loading");f(q.offsetWidth,q.offsetHeight)},bluebar:function(p,r){if(r&&!p){_t.postMessage(["mobile_iframe",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)}i();var q=n("iframe_controls");_t.addClass(q,"controls_bluebar");_t.removeClass(document.body,"loading")},bar:function(p){_t.postMessage(["resize_iframe","100%",46,"body_class","top_bar",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);_t.removeClass(document.body,"loading")},card:function(R){i();var A=n("iframe_controls"),O=n("btn_tumblr"),x=n("btn_toggle"),u=n("btn_bar"),K=n("btn_tray"),z=n("title_container"),F=n("tumblelog_avatar"),C=n("tumblelog_title"),v=n("tumblelog_name");var B=!_t.hasClass(A,"closed"),Q,s,p=_t.hasClass(A,"shimmer"),H=false,T,P,G,N,w,M,E,S,J,I,t,r,y;if(e.get.start_closed&&e.get.start_closed==="1"){B=false}var L=_t.getCookie("caseclosed");if(L&&L.value==="1"){B=false}function D(V,W){if(typeof V==="undefined"){V=!B}B=V;var X=V?I:t;var U=V?r:y;var Z=V?M:E;var Y=V?S:J;var aa=Math.max(1,Z-w);clearInterval(Q);clearTimeout(s);if(window===window.parent){W=false}if(W){if(s=f(X,U)){Q=b(X,U,false,function(){D(V,false)},100,10);return Q}}else{s=f(X,U,V?false:500)}_t.delay(function(){if(V){_t.removeClass(A,"closed")}else{_t.addClass(A,"closed")}u.style.width=Z+"px";K.style.width=Z+"px";K.style.height=Y+"px";z.style.width=aa+"px";if(!V&&p){_t.delay(function(){q()},500)}},0);return true}function q(){if(H){return}clearTimeout(H);_t.addClass(O,"shimmer");H=_t.delay(function(){_t.removeClass(O,"shimmer");H=false},600)}if(F){F.src=decodeURIComponent(e.get.avatar)}if(v){v.innerHTML=decodeURIComponent(e.get.name)}if(C&&e.get.title){C.innerHTML=_t.trim(decodeURIComponent(e.get.title.replace(/\+/g," ")))}if(!C.innerHTML){_t.addClass(z,"name_only");C.innerHTML=decodeURIComponent(e.get.name)}T=parseInt(_t.getStyle(A,"margin-top"),10)||0;P=parseInt(_t.getStyle(A,"margin-right"),10)||0;G=parseInt(_t.getStyle(A,"margin-bottom"),10)||0;N=parseInt(_t.getStyle(A,"margin-left"),10)||0;if(!N){T=P=G=N=6}_t.addClass(A,"closed");_t.addClass(A,"no_tray");t=A.offsetWidth+N+P;y=A.offsetHeight+T+G;E=u.offsetWidth;_t.removeClass(A,"no_tray");J=K.offsetHeight;_t.removeClass(A,"closed");I=A.offsetWidth+N+P;r=A.offsetHeight+T+G;S=K.offsetHeight;M=u.offsetWidth;w=31+10+10+10;_t.addClass(A,"closed");f(t,y);O.href=x.href;x.addEventListener("click",function(U){if(B){D(false,false);_t.setCookie("caseclosed",1,365)}else{D(true,true);_t.setCookie("caseclosed",0,365)}U.preventDefault();return false});O.addEventListener("click",function(U){if(!B){D(true,true);_t.setCookie("caseclosed",0,365);U.preventDefault();return false}});if(window!==window.parent&&_t.hasClass(A,"auto_close")){_t.postMessage(["scroll_listen",500,_t.protocol_host()],decodeURIComponent(e.origin),window.parent);k.scroll_callback=function(V,U){if(B&&V>60){D(false,false);k.scroll_callback=false}}}_t.each(K.childNodes,function(U,V){if(V.nodeType!==1){return}V.title="";if(_t.hasClass(V,"btn_tray_bottom")){_t.each(V.childNodes,function(W,X){if(X.nodeType!==1){return}X.title=""})}});O.title="";_t.removeClass(document.body,"loading");u.style.width=E+"px";K.style.width=E+"px";K.style.height=J+"px";_t.delay(function(){_t.addClass(A,"animate_transition");if(B){_t.delay(function(){D(B,true)},300);if(p){_t.delay(function(){q()},750)}}})},o_pill:function(p){var q=n("iframe_controls"),s=n("sliding_tray"),u=["follow","tumblr"];btn={},context=e.get.context||"index",timer={poll:false,postmessage:false,shimmer:false},size={margin:{top:0,right:0,bottom:0,left:0},open:{width:0,height:0,tray:0},closed:{width:0,height:0,tray:0},overshoot:0},flag={shimmer:false},fn={measure_open:function(){_t.addClass(document.body,"measuring");_t.addClass(document.body,"open");size.open.width=q.offsetWidth;size.open.height=q.offsetHeight;size.overshoot=Math.max(10,Math.ceil(0.15*size.open.width));_t.removeClass(document.body,"measuring");_t.removeClass(document.body,"open");document.body.style.minWidth=(size.open.width+size.margin.left+size.margin.right+size.overshoot)+"px";document.body.style.minHeight=(size.open.height+size.margin.top+size.margin.bottom)+"px"},measure_margins:function(w){size.margin.top=parseInt(_t.getStyle(q,"margin-top"),10);size.margin.right=parseInt(_t.getStyle(q,"margin-right"),10);size.margin.bottom=parseInt(_t.getStyle(q,"margin-bottom"),10);size.margin.left=parseInt(_t.getStyle(q,"margin-left"),10);if(typeof w==="undefined"){w=0}if(isNaN(size.margin.top)){size.margin.top=w}if(isNaN(size.margin.right)){size.margin.right=w}if(isNaN(size.margin.bottom)){size.margin.bottom=w}if(isNaN(size.margin.left)){size.margin.left=w}},shimmer:function(w){if(timer.shimmer){return true}if(w&&_t.containsElement(btn.tumblr,w.fromElement,true)){return true}_t.addClass(btn.tumblr,"shimmer");clearTimeout(timer.shimmer);timer.shimmer=_t.delay(function(){_t.removeClass(btn.tumblr,"shimmer");timer.shimmer=false},600)}};_t.each(u,function(x,w){u[x]=btn[w]=n("btn_"+w)});btn.tumblr.href="https://www.tumblr.com/?referring_blog="+e.get.name;btn.follow.href="https://www.tumblr.com/register/follow/"+e.get.name;var r=n("tumblelog_avatar_img");var v=n("tumblelog_avatar");var t=n("tumblelog_name");if(t){t.innerHTML=decodeURIComponent(e.get.name)}if(r){r.src=decodeURIComponent(e.get.avatar)}if(v){v.style.backgroundImage="url('"+decodeURIComponent(e.get.avatar)+"')";v.href="https://www.tumblr.com/register/follow/"+e.get.name}_t.postMessage(["teaser_iframe","initialize",e.get.page_slide||"slide",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);btn.tumblr.addEventListener("mouseover",function(w){if(!k.teaser){return true}_t.postMessage(["teaser_iframe","open",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);if(!_t.hasClass(q,"shimmer_loop")){fn.shimmer()}});_t.delay(function(){fn.measure_margins(5);fn.measure_open();f(size.open.width+size.margin.left+size.margin.right+size.overshoot,size.open.height+size.margin.top+size.margin.bottom);_t.addClass(document.body,"animated");_t.removeClass(document.body,"loading")})},p_pill:function(q){var r=n("iframe_controls"),u=["follow"];btn={},context=e.get.context||"index",timer={poll:false,postmessage:false,shimmer:false},size={margin:{top:0,right:0,bottom:0,left:0},open:{width:0,height:0},closed:{width:0,height:0},overshoot:0},flag={shimmer:false},fn={measure_open:function(){_t.addClass(document.body,"measuring");_t.addClass(document.body,"open");size.open.width=r.offsetWidth;size.open.height=r.offsetHeight;size.overshoot=Math.max(10,Math.ceil(0.15*size.open.width));_t.removeClass(document.body,"measuring");_t.removeClass(document.body,"open");document.body.style.minWidth=(size.open.width+size.margin.left+size.margin.right+size.overshoot)+"px";document.body.style.minHeight=(size.open.height+size.margin.top+size.margin.bottom)+"px"},measure_margins:function(x){size.margin.top=parseInt(_t.getStyle(r,"margin-top"),10);size.margin.right=parseInt(_t.getStyle(r,"margin-right"),10);size.margin.bottom=parseInt(_t.getStyle(r,"margin-bottom"),10);size.margin.left=parseInt(_t.getStyle(r,"margin-left"),10);if(typeof x==="undefined"){x=0}if(isNaN(size.margin.top)){size.margin.top=x}if(isNaN(size.margin.right)){size.margin.right=x}if(isNaN(size.margin.bottom)){size.margin.bottom=x}if(isNaN(size.margin.left)){size.margin.left=x}},shimmer:function(x){if(timer.shimmer){return true}if(x&&_t.containsElement(btn.tumblr,x.fromElement,true)){return true}_t.addClass(btn.follow,"shimmer");clearTimeout(timer.shimmer);timer.shimmer=_t.delay(function(){_t.removeClass(btn.follow,"shimmer");timer.shimmer=false},600)}};_t.each(u,function(y,x){u[y]=btn[x]=n("btn_"+x)});btn.follow.href="https://www.tumblr.com/register/follow/"+e.get.name;var s=n("tumblelog_avatar_img");var v=n("tumblelog_avatar");var t=n("btn_follow_txt");var w;var p=w=l10n_str[g]||l10n_str["en-us"];if(p.follow_user_on_tumblr===undefined){p.follow_user_on_tumblr="Follow %1$s on"}t.innerHTML=p.follow_user_on_tumblr.replace("%1$s",decodeURIComponent(e.get.name));if(s){s.src=decodeURIComponent(e.get.avatar)}if(v){v.style.backgroundImage="url('"+decodeURIComponent(e.get.avatar)+"')";v.href="https://www.tumblr.com/register/follow/"+e.get.name}btn.follow.addEventListener("mouseover",function(x){if(!_t.hasClass(r,"shimmer_loop")){fn.shimmer()}});_t.delay(function(){fn.measure_margins(5);fn.measure_open();f(size.open.width+size.margin.left+size.margin.right+size.overshoot,size.open.height+size.margin.top+size.margin.bottom);_t.addClass(document.body,"animated");_t.removeClass(document.body,"loading")})},hotdog:function(p){var q=n("iframe_controls"),s=n("sliding_tray"),r=n("right_anchor"),t=["explore","like","unlike","reblog","follow","unfollow","join","tumblr"];btn={},context=e.get.context||"index",timer={poll:false,postmessage:false,shimmer:false},size={margin:{top:0,right:0,bottom:0,left:0},open:{width:0,height:0,tray:0},closed:{width:0,height:0,tray:0},overshoot:0},flag={shimmer:false,pop_open:true,tray_open:true},fn={check_cookies:function(){var u="__tlan_"+decodeURIComponent(e.get.name);flag.pop_open=!(_t.getCookie(u));_t.setCookie(u,1,0,{expire_date:_t.relativeDate(10*60*1000),path:"/",domain:"."+_t.getRootDomain()})},set_button_context:function(v,u){_t.each(t,function(x,w){_t.removeClass(w,"first");_t.removeClass(w,"last");_t.removeClass(w,"hidden")});switch(v){case"index":_t.addClass(btn.explore,"off");_t.addClass(btn.like,"off");_t.addClass(btn.unlike,"off");_t.addClass(btn.reblog,"off");_t.addClass(btn.follow,"first");_t.addClass(btn.unfollow,"first");if(u&&u.following){_t.addClass(btn.follow,"hidden")}if(!(u&&u.following)){_t.addClass(btn.unfollow,"hidden")}if(p){_t.addClass(btn.join,"off")}break;case"permalink":_t.addClass(btn.explore,"off");_t.addClass(btn.like,"first");_t.addClass(btn.unlike,"first");if(u&&u.liked){_t.addClass(btn.like,"hidden")}else{_t.addClass(btn.unlike,"hidden")}if(u&&u.reblogged){_t.addClass(btn.reblog,"reblogged")}_t.addClass(btn.follow,"off");_t.addClass(btn.unfollow,"off");if(p){_t.addClass(btn.join,"off");_t.addClass(btn.like,"no_label");_t.addClass(btn.unlike,"no_label");_t.addClass(btn.reblog,"no_label")}break;case"tag":_t.addClass(btn.explore,"first");_t.addClass(btn.follow,"off");_t.addClass(btn.unfollow,"off");_t.addClass(btn.like,"off");_t.addClass(btn.unlike,"off");_t.addClass(btn.reblog,"off");if(u&&u.following){_t.addClass(btn.follow,"hidden")}else{_t.addClass(btn.unfollow,"hidden")}if(p){_t.addClass(btn.join,"off")}break;case"show_everything":break;default:return set_button_context("index",u)}},measure_open:function(){_t.addClass(document.body,"measuring");_t.addClass(document.body,"open");size.open.width=q.offsetWidth;size.open.height=q.offsetHeight;size.open.tray=s.offsetWidth;size.overshoot=Math.max(10,Math.ceil(0.15*size.open.width));_t.removeClass(document.body,"measuring");_t.removeClass(document.body,"open");document.body.style.minWidth=(size.open.width+size.margin.left+size.margin.right+size.overshoot)+"px";document.body.style.minHeight=(size.open.height+size.margin.top+size.margin.bottom)+"px"},measure_closed:function(){_t.addClass(document.body,"measuring");_t.addClass(document.body,"closed");size.closed.width=q.offsetWidth;size.closed.height=q.offsetHeight;size.closed.tray=s.offsetWidth;_t.removeClass(document.body,"measuring");_t.removeClass(document.body,"closed")},measure_margins:function(u){size.margin.top=parseInt(_t.getStyle(q,"margin-top"),10);size.margin.right=parseInt(_t.getStyle(q,"margin-right"),10);size.margin.bottom=parseInt(_t.getStyle(q,"margin-bottom"),10);size.margin.left=parseInt(_t.getStyle(q,"margin-left"),10);if(typeof u==="undefined"){u=0}if(isNaN(size.margin.top)){size.margin.top=u}if(isNaN(size.margin.right)){size.margin.right=u}if(isNaN(size.margin.bottom)){size.margin.bottom=u}if(isNaN(size.margin.left)){size.margin.left=u}},tray_toggle:function(u){if(typeof u==="undefined"){u=!flag.tray_open}if(u){_t.addClass(q,"open");_t.removeClass(q,"closed");s.style.width=size.open.tray+"px";clearTimeout(timer.postmessage);f(size.open.width+size.margin.left+size.margin.right+size.overshoot,size.open.height+size.margin.top+size.margin.bottom);timer.postmessage=_t.delay(function(){f(size.open.width+size.margin.left+size.margin.right,size.open.height+size.margin.top+size.margin.bottom)},500)}else{_t.removeClass(q,"open");_t.addClass(q,"closed");s.style.width=size.closed.tray+"px";clearTimeout(timer.postmessage);f(size.open.width+size.margin.left+size.margin.right+size.overshoot,size.open.height+size.margin.top+size.margin.bottom);timer.postmessage=_t.delay(function(){f(size.closed.width+size.margin.left+size.margin.right,size.closed.height+size.margin.top+size.margin.bottom)},500)}flag.tray_open=u},shimmer:function(u){if(timer.shimmer){return true}if(u&&_t.containsElement(btn.tumblr,u.fromElement,true)){return true}_t.addClass(btn.tumblr,"shimmer");clearTimeout(timer.shimmer);timer.shimmer=_t.delay(function(){_t.removeClass(btn.tumblr,"shimmer");timer.shimmer=false},600)}};_t.each(t,function(v,u){t[v]=btn[u]=n("btn_"+u)});btn.tumblr.href="https://www.tumblr.com/?referring_blog="+e.get.name;btn.follow.href="https://www.tumblr.com/register/follow/"+e.get.name;btn.join.href="https://www.tumblr.com/register/join_tumblr?referring_blog="+e.get.name;if(!p){btn.like.href="https://www.tumblr.com/register/like?"+_t.serialize({pid:e.get.pid||0,referring_blog:e.get.name});btn.reblog.href="https://www.tumblr.com/register/reblog?"+_t.serialize({pid:e.get.pid||0,referring_blog:e.get.name})}if(e.get.pid){context="permalink"}if(e.get.tag){context="tag"}if(e.get.show_everything==="AllButtons"){context="show_everything"}fn.set_button_context(context);_t.postMessage(["teaser_iframe","initialize",e.get.page_slide||"slide",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);btn.tumblr.addEventListener("mouseover",function(u){if(!k.teaser){return true}_t.postMessage(["teaser_iframe","open",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);if(!_t.hasClass(q,"shimmer_loop")){fn.shimmer()}});fn.check_cookies();_t.delay(function(){fn.measure_margins(5);fn.measure_open();fn.measure_closed();f(size.open.width+size.margin.left+size.margin.right+size.overshoot,size.open.height+size.margin.top+size.margin.bottom);_t.addClass(document.body,"animated");_t.removeClass(document.body,"loading");if(flag.pop_open){_t.removeClass(q,"open");_t.addClass(q,"closed");s.style.width=size.closed.tray+"px";_t.delay(function(){fn.tray_toggle(true)},550)}else{_t.addClass(q,"open");_t.removeClass(q,"closed");s.style.width=size.open.tray+"px"}})},teaser:function(p){if(!jQuery){console.log("No jQuery? :(");return false}(function(s){var v=s("#fullscreen_post_bg"),q=s("#fullscreen_post_image"),y=s("#by_tumblelog"),u=s("#by_avatar_link"),w=s("#by_avatar"),r=s("#get_started"),t=false,x=[];current_post=false;jqXHR=false,domain=_t.getRootDomain(),root_domain="http://"+(domain.toLowerCase()!=="tumblr.com"?domain:"www.tumblr.com"),fn={prepare_next_post:function(){if(!x.length){return fn.load_posts(true)}current_post=x.shift();fn.set_post(current_post);if(!x.length){return fn.load_posts(false)}},load_posts:function(z){if(jqXHR){return}jqXHR=s.ajax({url:root_domain+"/svc/teaser",type:"GET"}).done(function(A){if(!A.length){console.log("No posts returned!");return}x=A;if(z){fn.prepare_next_post()}}).always(function(A){jqXHR=false})},set_post:function(z){s(document.body).addClass("loading");y.attr("href",z.tumblelog.url).text(z.tumblelog.name);u.attr("href",z.tumblelog.url).css("background-image","url('"+z.tumblelog.avatar+"')");w.attr({src:z.tumblelog.avatar,alt:z.tumblelog.name});v.css("background-image","url('"+z.post.media_url+"')");q.attr("src",z.post.media_url);fn.poll_show()},poll_show:function(){if(q.get(0).naturalWidth||q.get(0).naturalHeight){fn.show();t=false}else{t=setTimeout(fn.poll_show,500)}},show:function(){clearTimeout(t);s(document.body).removeClass("waiting")},hide:function(){s(document.body).addClass("waiting")}};r.attr("href",root_domain+"/register/get_started?referring_blog="+decodeURIComponent(e.get.name));q.on("load",function(){s(document.body).removeClass("loading")});s(window).on("mouseleave",function(z){_t.postMessage(["teaser_iframe","close",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)});k.teaser_refresh=fn.prepare_next_post;k.teaser_show=fn.show;k.teaser_hide=fn.hide;fn.prepare_next_post();if(window.parent!==window){fn.hide()}})(jQuery)},mobile:function(O){i();var z=n("container"),y=n("message"),C=n("tumblelog_avatar"),A=n("tumblelog_title"),w=n("tumblelog_name"),I=n("device_name"),K=n("dismiss"),t=n("tumblr"),G=n("btn_open_in_app"),B=n("btn_install"),P=n("tumblr_small"),p=n("btn_open_in_app_small"),v=false;var F=a(),Q,M,E,L,H,s,q,x;var J=_t.getCookie("hide_download_app_prompt");if(J&&J.value==="1"){v=true}if(w){w.innerHTML=decodeURIComponent(e.get.name)}if(I){I.innerHTML=decodeURIComponent(F.pretty_name)}if(F.mobile){var D={blogName:e.get.name,page:"blog"};if(e.get.pid){D.page="permalink";D.postID=e.get.pid}var r="blog?"+_t.serialize(D);if(G){G.href="http://www.tumblr.com/open/app?"+_t.serialize({referrer:"mobile_banner",app_args:r});G.target=""}if(B){B.href="http://www.tumblr.com/download/"+F.name+"?"+_t.serialize({referrer:"mobile_banner",intent:r});B.target=""}if(p){p.href="http://www.tumblr.com/open/app?"+_t.serialize({referrer:"mobile_banner_persistent",app_args:r});p.target=""}}t.href="https://www.tumblr.com/register/join_tumblr?referring_blog="+e.get.name;P.href="https://www.tumblr.com/register/join_tumblr?referring_blog="+e.get.name;Q=parseInt(_t.getStyle(z,"margin-top"),10)||0;M=parseInt(_t.getStyle(z,"margin-right"),10)||0;E=parseInt(_t.getStyle(z,"margin-bottom"),10)||0;L=parseInt(_t.getStyle(z,"margin-left"),10)||0;if(!E){E=6}H="100%";q=z.offsetHeight+Q+E;if(!q||q<155){q=155}_t.addClass(z,"closed");s="100%";x=z.offsetHeight+Q+E;if(!x||x<54){x=54}K.addEventListener("click",function(R){_t.addClass(z,"closed");_t.setCookie("hide_download_app_prompt",1,365);R.preventDefault();_t.postMessage(["mobile_resize_iframe",s,x,"margin_bottom",E,"add_iframe_class","tumblr_controls_closed","remove_iframe_class","tumblr_controls_open",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);_t.postMessage(["tumblr_controls","closed",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)});P.addEventListener("click",function(R){if(!_t.hasClass(P,"reopen_iframe")){return true}_t.removeClass(z,"closed");_t.setCookie("hide_download_app_prompt",0,365);R.preventDefault();_t.postMessage(["mobile_resize_iframe",H,q,"margin_bottom",E,"add_iframe_class","tumblr_controls_open","remove_iframe_class","tumblr_controls_closed",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);_t.postMessage(["tumblr_controls","open",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)});var N=function(R){_t.addClass(R.target,"active")};var u=function(R){_t.removeClass(R.target,"active")};if(G){G.addEventListener("touchstart",N);G.addEventListener("touchend",u)}if(p){p.addEventListener("touchstart",N);p.addEventListener("touchend",u)}if(B){B.addEventListener("touchstart",N);B.addEventListener("touchend",u)}if(v){_t.postMessage(["mobile_resize_iframe",s,x,"margin_bottom",E,"add_iframe_class","tumblr_controls_closed","remove_iframe_class","tumblr_controls_open",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)}else{_t.removeClass(z,"closed");_t.postMessage(["mobile_resize_iframe",H,q,"margin_bottom",E,"add_iframe_class","tumblr_controls_open","remove_iframe_class","tumblr_controls_closed",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)}_t.postMessage(["tumblr_controls",v?"closed":"open",_t.protocol_host()],decodeURIComponent(e.origin),window.parent);_t.delay(function(){_t.removeClass(document.body,"loading")})}}}());return{initialize:function(r,q){e.get=_t.getVars();e.origin=decodeURIComponent(e.get.src);m=r;if(!(m&&typeof c[m]==="function")){m="standard"}var p=_t.isLoggedIn();redirect=(!q&&!e.get.v&&(p||e.get.iphone)&&!e.get.no_redirect)||e.get.force_redirect;if(!p&&e.get.brag){window.onload=function(){f(1,1)};return false}window.onbeforeunload=function(){if(window!==window.parent){_t.postMessage(["location_change",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)}};if(redirect){document.location.replace("http://www.tumblr.com/dashboard/iframe?"+window.location.toString().split("?")[1]);return}Tumblr.PostMessageListener.initialize(function(s){Tumblr.Iframe.post_message_event(s)});if(Tumblr.LikeButtonRequests){Tumblr.PostMessageListener.initialize(function(t,s){Tumblr.LikeButtonRequests.get_like_states(t);Tumblr.LikeButtonRequests.send_like(t,s);Tumblr.LikeButtonRequests.send_unlike(t,s)});Tumblr.LikeButtonRequests.loaded()}window.onload=function(){g=(window.navigator.userLanguage||window.navigator.language||"en_US").toLowerCase();g=(window.l10n_keys&&window.l10n_keys[g])?window.l10n_keys[g]:g;g=g.toLowerCase().replace("_","-");j=window.l10n_str[g]||window.l10n_str["en-us"];o(j,false);_t.addClass(document.body,"version_"+m);c[m](p);if(p&&Tumblr.IframeButtons){Tumblr.IframeButtons.init()}};if(window!==window.parent){_t.postMessage(["request_keywords",_t.protocol_host()],decodeURIComponent(e.origin),window.parent)}},post_message_event:function(p){if(p[0]==="parent_scroll"){if(typeof k.scroll_callback==="function"){k.scroll_callback(p[1],p[2])}}if(p[0]==="teaser"){if(p.length<2){return}switch(p[1]){case"enable":k.teaser=true;return;case"disable":k.teaser=false;return;case"refresh":if(typeof k.teaser_refresh==="function"){k.teaser_refresh()}return;case"show":if(typeof k.teaser_show==="function"){k.teaser_show()}return;case"hide":if(typeof k.teaser_hide==="function"){k.teaser_hide()}return;case"prepare_next":if(typeof k.teaser_hide==="function"){k.teaser_hide()}if(typeof k.teaser_refresh==="function"){k.teaser_refresh()}return}}}}})();(function(c,a){if(!c){return}var d={init:function(g){var e=c(".btn:not(.hidden)"),f=0;e.each(function(){var h=c(this);f+=h.outerWidth(true)});if(c(".btn.unfollow.hidden").length){f+=15}if(typeof(g)=="function"){g(f)}}};a.IframeSizing=d;var b={init:function(){c(".iframe_controls").on("click",".btn.reblog",function(i){var h=c(this),e=i.shiftKey,j=h.attr("data-form-key"),f=h.attr("data-reblog-key"),k=h.attr("data-reblog-id");if(i.altKey){if(!f.length){h.addClass("animated shake");window.setTimeout(function(){h.removeClass("shake")},1000);return false}if(!h.hasClass("reblogged")){h.addClass("reblogged");h.addClass("animated").addClass("collapse_tumblelog_reblog_button");window.setTimeout(function(){h.addClass("final_state")},1000);var g=c.ajax({url:"/fast_reblog",type:"POST",data:{form_key:j,reblog_key:f,reblog_post_id:k,queue:e}});g.error(function(){h.removeClass("reblogged");alert(l10n_str.ajax_error)})}return false}});c(".iframe_controls").on("click",".btn.follow, .btn.unfollow, .btn.like, .btn.unlike",function(g){g.stopPropagation();g.preventDefault();var f=c(this),e=false,h={};f.addClass("hidden");if(f.hasClass("follow")){e=Tumblr.follow;h={tumblelog:f.attr("data-tumblelog-name"),source:"FOLLOW_SOURCE_IFRAME"};f.siblings(".unfollow").removeClass("hidden")}if(f.hasClass("unfollow")){e=Tumblr.unfollow;h={tumblelog:f.attr("data-tumblelog-name"),source:"FOLLOW_SOURCE_IFRAME"};f.siblings(".follow").removeClass("hidden")}if(f.hasClass("like")){e=Tumblr.like;h={id:f.attr("data-id"),key:f.attr("data-key")};f.siblings(".unlike").removeClass("hidden")}if(f.hasClass("unlike")){e=Tumblr.unlike;h={id:f.attr("data-id"),key:f.attr("data-key")};f.siblings(".like").removeClass("hidden")}if(e){e(h,{success:function(){},error:function(){alert(l10n_str.ajax_error)}})}})}};a.IframeButtons=b})(jQuery,Tumblr);
Tumblr.LikeButtonRequests={loaded:function(){Tumblr.LikeButtonRequests.post_to_parent({},"logged_in_iframe_loaded")},get_like_states:function(b){if(b[0]==="get_like_states"){if(typeof jQuery==="undefined"||!jQuery){return}var a=jQuery("#tumblelog_name").data("tumblelog-name");var e=JSON.parse(b[1]);var d=jQuery("#tumblr_form_key").attr("content");var c={form_key:d,tumblelog_name:a};if(e){if(e.page){c.page=e.page}if(e.ids){c.ids=e.ids}}jQuery.ajax({url:"/svc/like_state",type:"post",data:c,success:function(f){Tumblr.LikeButtonRequests.post_to_parent(f)}})}},send_like:function(c,a){if(a!=="http://assets.tumblr.com"){return}if(c[0]==="like"){var d=JSON.parse(c[1]);var b=d.post_id;var e=d.reblog_key;if(b&&e){d={id:b,key:e};Tumblr.like(d,{success:function(){var f={post_id:b,state:true};Tumblr.LikeButtonRequests.post_to_parent(f)},error:function(){alert(l10n_str.ajax_error)}})}}},send_unlike:function(c,a){if(a!=="http://assets.tumblr.com"){return}if(c[0]==="unlike"){var d=JSON.parse(c[1]);var b=d.post_id;var e=d.reblog_key;if(b&&e){d={id:b,key:e};Tumblr.unlike(d,{success:function(){var f={post_id:b,state:false};Tumblr.LikeButtonRequests.post_to_parent(f)},error:function(){alert(l10n_str.ajax_error)}})}}},post_to_parent:function(b,a){if(!a){a="like_state_update"}var d=a+";"+JSON.stringify(b);try{window.parent.postMessage(d,"*")}catch(c){}}};
(function(e,d){if(e.addEventListener){return}function a(g){var f=d[g];d[g]=function(h){return b(f(h))}}function c(f,h,g){return(g=this).attachEvent("on"+f,function(i){i=i||e.event;i.preventDefault=i.preventDefault||function(){i.returnValue=false};i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=true};h.call(g,i)})}function b(g,f){if(f=g.length){while(f--){g[f].addEventListener=c}}else{g.addEventListener=c}return g}b([d,e]);if("Element" in e){e.Element.prototype.addEventListener=c}else{d.attachEvent("onreadystatechange",function(){b(d.all)});a("getElementsByTagName");a("getElementById");a("createElement");b(d.all)}})(window,document);
var _t=(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,e){if(this===null){throw new TypeError()}var d=this;var a=d.length>>>0;if(a===0){return -1}var f=0;if(arguments.length>1){f=Number(arguments[1]);if(f!=f){f=0}else{if(f!==0&&f!=Infinity&&f!=-Infinity){f=(f>0||-1)*Math.floor(Math.abs(f))}}}if(f>=a){return -1}var b=f>=0?f:Math.max(a-Math.abs(f),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}}return{isLoggedIn:function(){return(document.cookie.indexOf("logged_in=1")!=-1)},getVars:function(){var a={};window.location.search.replace(/[?&]+([^=&]+)(=[^&]*)?/gi,function(b,c,d){a[c]=(d===undefined)?true:d.substring(1)});return a},objSize:function(b){var a=0,c;for(c in b){if(b.hasOwnProperty(c)){a++}}return a},randomProperty:function(c){var a,b=0,d;for(d in c){if(Math.random()<1/b++){a=d}}return a},findParent:function(c,b){var a=c.parentNode;while(!_t.matchesSelector(a,b)){if(!a.parentNode){return false}a=a.parentNode}return a},containsElement:function(c,d,b){if(!c||!d){return false}if(!b&&c===d){return false}var a=d;do{if(c===a){return true}}while((a=a.parentNode));return false},matchesSelector:function(c,a){if(!c){return false}if(c.webkitMatchesSelector){return c.webkitMatchesSelector(a)}if(c.mozMatchesSelector){return c.mozMatchesSelector(a)}var b=document.querySelectorAll(a);for(var d in b){return b[d]===c}return false},addClass:function(a,b){if((" "+a.className+" ").indexOf(" "+b+" ")==-1){a.className=a.className===""?b:a.className+" "+b}},removeClass:function(b,a){if(b.className.indexOf(a)==-1){return}var c=b.className.split(" ");c.splice(c.indexOf(a),1);b.className=c.join(" ")},addClasses:function(c,b){for(var a=0;a<b.length;a++){_t.addClass(c,b[a])}},removeClasses:function(c,b){for(var a=0;a<b.length;a++){_t.removeClass(c,b[a])}},toggleClass:function(b,a){if(hasClass(b,a)){_t.removeClass(b,a)}else{_t.addClass(b,a)}},hasClass:function(b,a){if(!b){return}var c=b.className;return(c.split(" ").indexOf(a)!==-1)},serialize:function(e,c){var f=[];for(var d in e){var b=c?c+"["+d+"]":d,a=e[d];f.push(typeof a=="object"?serialize(a,b):encodeURIComponent(b)+"="+encodeURIComponent(a))}return f.join("&")},relativeDate:function(b){var a=new Date();if(b){a.setTime(a.getTime()+b)}return a},getRootDomain:function(b,a){if(!b){b=document.location.href}var c=b.replace(/^[^\/]+\/\/([^\/]+).*/i,"$1");var e=c.split(".");if(e.length<2){return c}var d=e.slice(a?1:-2).join(".");if(d.toLowerCase()==="tumblr.net"){return c}return d},getCookie:function(d){var b=document.cookie;var g,f=b.split(";");var e,a=f.length;for(e=0;e<a;e+=1){if((g=f[e].replace(/^\s+|\s+$/g,"").split("="))[0]==d){return{name:g[0],value:g[1]}}}return false},setCookie:function(a,f,h,c){c=c||{};var b=new Date();var g=(typeof(c.path)!=="undefined")?c.path:"/";var e=(typeof(c.is_secure)!=="undefined")?true:false;var d=(typeof(c.domain)!=="undefined")?c.domain:"";b.setDate(b.getDate()+h);if(typeof(c.expire_date)!=="undefined"){expire_dates=true;b=c.expire_date}document.cookie=a+"="+escape(f)+((h===null)?"":";expires="+b.toGMTString())+";path="+g+((e===false)?"":";secure")+((d==="")?"":";domain="+d)},unsetCookie:function(a){_t.setCookie(a,"",-1)},getStyle:function(c,a){var b;if(typeof c.currentStyle!="undefined"){b=c.currentStyle}else{b=document.defaultView.getComputedStyle(c,null)}return b[a]||false},sortObj:function(e,d){var f=[];for(var c in e){if(e.hasOwnProperty(c)){f.push(c)}}if(typeof d==="function"){f.sort(d)}else{if(d==="value"){f.sort(function(i,h){var g=e[i];var j=e[h];return((g<j)?-1:((g>j)?1:0))})}else{f.sort()}}var a={};for(var b=0;b<f.length;b++){a[f[b]]=e[f[b]]}return a},reverseObj:function(e){var f=[];var c={};for(var d in e){var b={};b.key=d;b.val=e[d];f.push(b)}f.reverse();for(var a in f){c[f[a].key]=f[a].val}return c},protocol_host:function(){return document.location.protocol+"//"+document.location.host},postMessage:function(c,a,b){if(!b){b=parent}if(typeof c!=="string"){c=c.join(";")}b.postMessage(c,a)},each:function(c,b){for(var a=0;a<c.length;a++){if(b.apply(this,[a,c[a]])===false){return}}},trim:function(a){return a.replace(/\s*(.*\S)?\s*/i,"$1")},delay:function(d,c,a,b){if(!a){a=this}if(!b){b=[]}if(c<0){d.apply(a,b);return false}return setTimeout(function(){d.apply(a,b)},c)},is_mobile:function(b){if(typeof b==="undefined"){b=(navigator.userAgent||navigator.vendor||window.opera)}return !!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))}}})();
